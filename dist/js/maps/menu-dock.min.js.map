{"version":3,"names":[],"mappings":"","sources":["menu-dock.js"],"sourcesContent":["'use strict'\n\nconst electron = require( 'electron' )\nconst {\n\tapp,\n\tMenu,\n\tMenuItem,\n\tipcMain\n}\t= require('electron')\nconst log\t\t= require( 'electron-log' ) // <- delete this\nconst Store\t= require( 'electron-store' )\nconst store\t= new Store()\n\n\nlet itemAll = new MenuItem({type: 'radio'}),\n\titemFav = new MenuItem({type: 'radio'}),\n\titemNone = new MenuItem({type: 'radio'}),\n\titemOpen = new MenuItem({type: 'normal'})\n\n\nmodule.exports.createMenu = function ( win ) {\n\t\n\tconst i18n = require( './i18n.min' )\n\t\n\tlet selectedNote \t= store.get( 'appInterface.selected' ),\n\t\tselectedCat \t= store.get( 'categories.selected' )\n\t\n\titemAll.label = i18n.t('dock:categories.all', 'All Notes')\n\titemFav.label = i18n.t('dock:categories.favorite', 'Favorites')\n\titemNone.label = i18n.t('dock:categories.none', 'Uncategorised')\n\titemOpen.label = i18n.t('dock:open', 'Open in Nextcloud') + ' â†’'\n\t\n\titemAll.checked = (selectedCat == '##all##') ? true : false\n\titemFav.checked = (selectedCat == '##fav##') ? true : false\n\titemNone.checked = (selectedCat == '##none##') ? true : false\n\t\n\titemAll.click = () => {\n\t\t\n\t\titemAll.checked = true\n\t\twin.webContents.send('dock-category', '##all##')\n\t}\n\t\n\titemFav.click = () => {\n\t\t\n\t\titemFav.checked = true\n\t\twin.webContents.send('dock-category', '##fav##')\n\t}\n\t\n\titemNone.click = () => {\n\t\t\n\t\titemNone.checked = true\n\t\twin.webContents.send('dock-category', '##none##')\n\t}\n\t\n\titemOpen.enabled = false\n\titemOpen.click = () => { win.webContents.send('note', 'open') }\n\t\n\t\n\t//if( selectedNote ) itemOpen.visible = true\n\t\n\tlet dockMenu = new Menu()\n\t\n\tdockMenu.append( itemOpen )\n\t\n\tdockMenu.append( new MenuItem({type: 'separator'}) )\n\t\n\tdockMenu.append( itemAll )\n\tdockMenu.append( itemFav )\n\tdockMenu.append( itemNone )\n\t\n\tapp.dock.setMenu( dockMenu )\n}\n\n\nipcMain.on('dock-update-cats', (event, message) => {\n\t\n\tswitch( message ) {\n\t\t\n\t\tcase '##all##':\n\t\t\titemAll.checked = true\n\t\tbreak\n\t\t\n\t\tcase '##fav##':\n\t\t\titemFav.checked = true\n\t\tbreak\n\t\t\n\t\tdefault:\n\t\t\titemNone.checked = true\n\t}\n})\n\n\nipcMain.on('dock-update-openitem', (event, message) => {\n\t\n\tlog.info(message)\n\tlog.info(typeof message)\n\t\n\titemOpen.enabled = message\n})\n"],"file":"../menu-dock.min.js"}