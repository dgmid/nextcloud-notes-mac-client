{"version":3,"names":[],"mappings":"","sources":["window-nc-loginflow.js"],"sourcesContent":["'use strict'\n\nconst {BrowserWindow} = require('electron')\nconst url\t= require( 'url' )\nconst path\t= require( 'path' )\nconst log\t= require( 'electron-log' )\n\nlet loginFlow = null\n\n\nmodule.exports = {\n\t\n\topenLoginflow: function( message ) {\n\t\t\n\t\tloginFlow = new BrowserWindow({\n\t\t\t\n\t\t\twidth: 800,\n\t\t\theight: 600,\n\t\t\tresizable: false,\n\t\t\tminimizable: false,\n\t\t\tmaximizable: false,\n\t\t\tshow: false,\n\t\t\ttitleBarStyle: 'hidden',\n\t\t\tbackgroundColor: '#0082c9',\n\t\t\twebPreferences: {\n\t\t\t\tdevTools: true,\n\t\t\t\tnodeIntegration: false\n\t\t\t}\n\t\t})\n\t\t\n\t\tloginFlow.loadURL( message + '/index.php/login/flow' , {\n\t\t\t\n\t\t\tuserAgent: 'Nextcloud Notes Client - Macintosh',\n\t\t\textraHeaders: 'OCS-APIRequest: true'\n\t\t})\n\t\t\n\t\tloginFlow.once('ready-to-show', () => {\n\t\t\t\n\t\t\tloginFlow.show()\n\t\t})\n\t\t\n\t\tloginFlow.webContents.on('did-fail-load', () => {\n\t\t\t\n\t\t\tlog.error( `loginflow window did not load` )\n\t\t})\n\t\t\n\t\tloginFlow.webContents.on( 'crashed', ( event, killed ) => {\n\t\t\t\n\t\t\tlog.info( `loginflow window has crashed:` )\n\t\t\tlog.error( event )\n\t\t})\n\t\t\n\t\tloginFlow.on( 'unresponsive', () => {\n\t\t\t\n\t\t\tlog.info( `loginflow window is not respondingâ€¦` )\n\t\t})\n\t\t\n\t\tloginFlow.on( 'responsive', () => {\n\t\t\t\n\t\t\tlog.info( `loginflow window is responding` )\n\t\t})\n\t},\n\t\n\tcloseLoginflow: function() {\n\t\n\t\tif( loginFlow ) {\n\t\t\t\n\t\t\tloginFlow.close()\n\t\t\tloginFlow = null\n\t\t}\n\t}\n}\n"],"file":"../window-nc-loginflow.min.js"}