{"version":3,"names":[],"mappings":"","sources":["categories.js"],"sourcesContent":["'use strict'\n\nconst Store\t\t= require( 'electron-store' )\nconst store\t\t= new Store()\nconst $\t\t\t= require( 'jquery' )\n\n\n\nmodule.exports = {\n\t\n\tsanitizeCategory: function( category ) {\n\t\t\n\t\tcategory = category.toLowerCase()\n\t\tcategory = category.replace( 'ÃŸ', 'ss' )\n\t\tcategory = category.normalize( 'NFD' ).replace( /[\\u0300-\\u036f]/g, '' )\n\t\tcategory = category.replace( /[^0-9a-z ]/gi, '' )\n\t\tcategory = category.replace( /\\s+/g, '_' )\n\t\t\n\t\treturn category\n\t\n\t},\n\t\n\tcategoryList: function( array ) {\n\t\t\n\t\tlet compressed = [],\n\t\tcopy = array.slice(0),\n\t\torderby = store.get( 'appSettings.ordercats' ),\n\t\tresults = []\t\t\n\t\tif( orderby == null ) orderby = 'asc'\n\t\t\n\t\t$('#categories').empty().addClass( orderby )\n\t\t\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\n\t\t\tvar theCount = 0\n\t\t\t\n\t\t\tfor (var w = 0; w < copy.length; w++) {\n\t\t\t\t\n\t\t\t\tif (array[i] == copy[w]) {\n\t\t\t\t\t\n\t\t\t\t\ttheCount++\n\t\t\t\t\tdelete copy[w]\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (theCount > 0) {\n\t\t\t\t\n\t\t\t\tvar a = new Object()\n\t\t\t\ta.id \t= module.exports.sanitizeCategory( array[i] )\n\t\t\t\ta.value = array[i]\n\t\t\t\ta.count = theCount\n\t\t\t\tcompressed.push(a)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( compressed.length > 1 ) {\n\t\t\t\n\t\t\tcompressed.sort(function(x, y) {\n\t\t\t\t\n\t\t\t\tvar itemX = x['id']\n\t\t\t\tvar itemY = y['id']\n\t\t\t\t\n\t\t\t\treturn (itemX < itemY) ? -1 : (itemX > itemY) ? 1 : 0\n\t\t\t})\n\t\t}\n\t\t\n\t\tfor ( let item of compressed ) {\n\t\t\t\n\t\t\tlet theItem\t\t= item.value,\n\t\t\t\ttheCount\t= item.count,\n\t\t\t\ttheID \t\t= item.id,\n\t\t\t\tshowcount\t= (store.get( 'appSettings.catcount' )) ? ' show' : ''\n\t\t\t\n\t\t\tif( theItem.length > 0 ) {\n\t\t\t\n\t\t\t\tresults.push( {\n\t\t\t\t\t\"item\": theItem ,\n\t\t\t\t\t\"catID\": theID,\n\t\t\t\t\t\"count\": theCount\n\t\t\t\t} )\n\t\t\t\t\n\t\t\t\t$('#categories').append(`<li><button class=\"custom\" data-catid=\"${theID}\" data-category=\"${theItem}\" title=\"${theItem}\"><span class=\"cat-name\">${theItem}</span><span class=\"cat-count${showcount}\">${theCount}</span></button></li>`)\n\t\t\t}\n\t\t}\n\t\t\n\t\t$(`.categories button[data-catid=\"${store.get('categories.selected')}\"]`).addClass( 'selected' )\n\t\t\n\t\tmodule.exports.showHideCategoryIcons()\n\t\tstore.set( 'categories.list', results )\n\t\n\t},\n\t\n\tshowHideCategoryIcons: function () {\n\t\t\n\t\tif( $('.categories button.selected').hasClass( 'custom' ) ) {\n\t\t\t\n\t\t\t$('#sidebar').addClass( 'hidecats' )\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\t$('#sidebar').removeClass( 'hidecats' )\n\t\t}\n\t},\n\t\n\tselectCategory: function( catid ) {\n\t\t\n\t\t$('#search').val( '' )\n\t\t$('#clear').hide()\n\t\t$('#result').empty().hide()\n\t\t$('#sidebar li').removeClass( 'last' )\n\t\t\n\t\tswitch( catid ) {\n\t\t\t\n\t\t\tcase '##all##':\n\t\t\t\t \n\t\t\t\t$(`#sidebar li`).show()\n\t\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tcase '##fav##':\n\t\t\t\t\n\t\t\t\t$(`#sidebar li`).hide()\n\t\t\t\t$(`#sidebar button[data-favorite='true']`).parent('li').show()\n\t\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tdefault:\n\t\t\t\t\n\t\t\t\t$(`#sidebar li`).hide()\n\t\t\t\t$(`#sidebar button[data-catid='${catid}']`).parent('li').show()\t\n\t\t\tbreak\n\t\t}\n\t\t\n\t\t$('#sidebar li:visible:last').addClass( 'last' )\n\t},\n\t\n\ttoggleCategories: function( state ) {\n\t\t\n\t\t$('#sidebar').toggleClass( 'showcats' )\n\t}\n}\n"],"file":"../categories.min.js"}