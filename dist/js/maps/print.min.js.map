{"version":3,"names":[],"mappings":"","sources":["print.js"],"sourcesContent":["'use strict'\n\nconst { BrowserWindow } = require('electron')\nconst path\t= require( 'path' )\nconst Store\t= require( 'electron-store' )\nconst store\t= new Store()\nconst fs\t= require( 'fs-extra' )\nconst log\t= require( 'electron-log' )\n\n\nmodule.exports.printNote = function( message ) {\n\t\n\tlet printWindow\n\t\n\tprintWindow = new BrowserWindow({\n\t\t\n\t\tshow: false,\n\t\twebPreferences: {\n\t\t\tdevTools: false,\n\t\t\tnodeIntegration: true,\n\t\t\tenableRemoteModule: true\n\t\t}\n\t})\n\t\n\t\n\tlet css\t\t= fs.readFileSync(path.join(__dirname, '../css/print.min.css') ,'utf8'),\n\t\tzoom \t= store.get( 'appSettings.zoom' )\n\t\n\tlet head = `<html><head><meta charset=\"utf-8\"><style>${css}</style></head><body style=\"--accent: ${message.colors[0]}; --accent-light: ${message.colors[1]}; --accent-dark: ${message.colors[2]}; --app-light: ${message.colors[3]}; --app-dark: ${message.colors[4]};\"><div class=\"editor-preview-active\" style=\"padding: 22px; font-size: ${zoom/10}rem\">`,\n\t\tfoot = `</div></body>`\n\t\n\tprintWindow.loadURL( `data:text/html;charset=UTF-8,${encodeURIComponent(head + message.note + foot)}` )\n\t\n\t\n\tprintWindow.webContents.on('did-finish-load', () => {\n\t\t\n\t\tconst printOptions = { printBackground: true }\n\t\t\n\t\tprintWindow.webContents.print(printOptions, (success, error) => {\n\t\t\t\n\t\t\tif( !success ) {\n\t\t\t\t\n\t\t\t\tlog.error( 'printing error:' )\n\t\t\t\tlog.info( error )\n\t\t\t}\n\t\t\t\n\t\t\tprintWindow.close()\n\t\t})\n\t})\n}\n"],"file":"../print.min.js"}