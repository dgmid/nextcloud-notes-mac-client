{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["'use strict'\n\nconst {app, ipcMain, webContents} = require('electron')\nconst url\t\t= require( 'url' )\nconst path\t\t= require( 'path' )\nconst dialog\t= require( 'electron' ).dialog\nconst Store\t\t= require( 'electron-store' )\nconst store\t\t= new Store()\nconst log\t\t= require( 'electron-log' )\n\nconst mainWindow\t= require( './window-app.min' )\nconst preferences\t= require( './window-prefs.min' )\nconst ncLoginflow\t= require( './window-nc-loginflow.min' )\n\n\n\napp.on('ready', mainWindow.openWindow)\n\n\napp.on('certificate-error', (event, webContents, url, error, certificate, callback) => {\n\t\n\tif( store.get('appSettings.nocertificate') ) {\n\t\t\n\t\tlog.info(`certificate ignored`)\n\t\tevent.preventDefault()\n\t\tcallback(true)\n\t\t\n\t} else {\n\t\t\n\t\tconst i18n = require( './i18n.min' )\n\t\t\n\t\tlog.error(error)\n\t\tcallback(false)\n\t\tlet server = store.get( 'loginCredentials.server' )\n\t\t\n\t\tdialog.showErrorBox(\n\t\t\ti18n.t('main:dialog.error.cert.title', 'Your connection is not private'),\n\t\t\t`${error}\\n\\n` +\n\t\t\ti18n.t('main:dialog.error.cert.text', {server: server})\n\t\t)\n\t}\n})\n\n\nprocess.on('uncaughtException', (err, origin) => {\n\t\n\tlog.error(`caught exception: ${err}`)\n\tlog.info(`exception origin: ${origin}`)\n})\n\n\nipcMain.on('loginflow', (event, message) => {\n\t\n\tncLoginflow.openLoginflow( message )\n})\n\n\napp.on('open-prefs', () => {\n\t\n\tpreferences.openPrefs()\n})\n\n\napp.on('open-config', () => {\n\t\n\tstore.openInEditor()\n})\n\n\nipcMain.on('print-preview', (event, message) => {\n\t\n\tconst print\t= require( './print.min' )\n\tprint.printNote( message )\n})\n\n\nipcMain.on('quit-app', (event, message) => {\n\t\n\tif( mainWindow.windowWillQuit() ) app.quit()\n})\n\n\nipcMain.on('update-theme', (event, message) => {\n\t\n\twebContents.getAllWebContents().forEach( wc => {\n\t\t\n\t\twc.send('set-theme', message)\n\t})\n})\n\n\nipcMain.on('error-in-render', function(event, message) {\n\t\n\tlog.error(`exception in render process:`)\n\tlog.info (message)\n})\n"],"file":"../main.min.js"}